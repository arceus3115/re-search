(()=>{"use strict";var t={60:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function c(t){try{i(r.next(t))}catch(t){a(t)}}function s(t){try{i(r.throw(t))}catch(t){a(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}i((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.renderLandingPage=c,e.renderApp=s;const o=n(806),a=n(966);function c(t){t.innerHTML='\n        <div class="landing-page">\n            <h1>Research Network Hub</h1>\n            <p>Welcome to your central hub for academic research tools.</p>\n            \n            <h2>Available Tools</h2>\n            <div class="tool-list">\n                <button class="tool-button" data-tool="search">Academic Paper Search</button>\n                <button class="tool-button" data-tool="pcsas">PCSAS Scraper</button>\n            </div>\n            \n            <h2>Your Network Dashboard</h2>\n            <div id="network-animation-placeholder" style="height: 300px; background-color: #f0f0f0; display: flex; justify-content: center; align-items: center; border-radius: 8px;">\n                <p>Cool Network Animation Placeholder</p>\n            </div>\n        </div>\n    ',document.querySelectorAll(".tool-button").forEach(e=>{e.addEventListener("click",e=>{const n=e.target.dataset.tool;n&&s(t,n)})})}function s(t){return r(this,arguments,void 0,function*(t,e="search"){t.innerHTML='\n        <div class="app-header">\n            <div class="logo">Research Network</div>\n            <div class="tabs">\n                <button class="tab-button" data-tab="search">Academic Paper Search</button>\n                <button class="tab-button" data-tab="pcsas">PCSAS Scraper</button>\n            </div>\n        </div>\n        <div class="app-container">\n            <div id="tab-content-search" class="tab-content"></div>\n            <div id="tab-content-pcsas" class="tab-content"></div>\n        </div>\n    ';const n=document.querySelector(".app-header .logo");n&&(n.style.cursor="pointer",n.addEventListener("click",()=>{c(t)})),(0,o.renderSearchTab)(),(0,a.renderPcsasTab)(),document.querySelectorAll(".tab-button").forEach(t=>{t.addEventListener("click",t=>{const e=t.target.dataset.tab;if(document.querySelectorAll(".tab-content").forEach(t=>{t.style.display="none"}),document.querySelectorAll(".tab-button").forEach(t=>{t.classList.remove("active")}),e){const n=document.getElementById(`tab-content-${e}`);n&&(n.style.display="block"),t.target.classList.add("active")}})});const r=document.querySelector(`.tab-button[data-tab="${e}"]`);r&&r.click()})}},300:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function c(t){try{i(r.next(t))}catch(t){a(t)}}function s(t){try{i(r.throw(t))}catch(t){a(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}i((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.fetchFields=function(){return n(this,void 0,void 0,function*(){const t=yield fetch("/api/v1/fields");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()})},e.searchPapers=function(t,e,r,o){return n(this,void 0,void 0,function*(){const n=yield fetch("/api/v1/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({search_term:t,from_year:e,country_code:r,topic_ids:o})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return n.json()})},e.scrapePcsasData=function(){return n(this,void 0,void 0,function*(){const t=yield fetch("/api/v1/pcsas");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()})}},806:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function c(t){try{i(r.next(t))}catch(t){a(t)}}function s(t){try{i(r.throw(t))}catch(t){a(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}i((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.renderSearchTab=function(){const t=document.getElementById("tab-content-search");if(!t)return;t.innerHTML='\n        <h2>Search Academic Papers</h2>\n        <form id="search-form">\n            <label for="search-term">Search Term:</label>\n            <input type="text" id="search-term" name="search_term" required><br><br>\n\n            <label for="from-year">From Year (default 1980):</label>\n            <input type="number" id="from-year" name="from_year" value="1980"><br><br>\n\n            <label for="country-code">Country Code (default US):</label>\n            <input type="text" id="country-code" name="country_code" value="US"><br><br>\n\n            <h3>Select Topic IDs:</h3>\n            <div id="topic-ids-grid"></div>\n            <br>\n\n            <button type="submit">Search</button>\n        </form>\n        \n        <div id="search-results"></div>\n    ';const e=document.getElementById("topic-ids-grid"),n=document.getElementById("search-form"),a=document.getElementById("search-results");let c=[];(()=>{r(this,void 0,void 0,function*(){try{const t=(yield(0,o.fetchFields)()).fields;if(e)for(const n in t){const r=document.createElement("div");r.classList.add("topic-button"),r.dataset.topicId=n,r.textContent=t[n],r.addEventListener("click",()=>{r.classList.toggle("selected"),r.classList.contains("selected")?c.push(n):c=c.filter(t=>t!==n)}),e.appendChild(r)}}catch(e){console.error("Error fetching fields:",e),t&&(t.innerHTML+="<p>Failed to load fields. Please check the backend server.</p>")}})})(),n&&n.addEventListener("submit",t=>r(this,void 0,void 0,function*(){t.preventDefault();const e=new FormData(n),r=e.get("search_term"),s=e.get("from_year")?parseInt(e.get("from_year")):1980,i=e.get("country_code")||"US",d=c;a&&(a.innerHTML="<p>Searching...</p>");try{const t=(yield(0,o.searchPapers)(r,s,i,d)).works;if(a)if(a.innerHTML="<h3>Search Results:</h3>",t&&t.length>0){const e=document.createElement("ul");t.forEach(t=>{const n=document.createElement("li");n.innerHTML=`\n                                <h4>${t.title||"No Title"}</h4>\n                                <p><strong>Authors:</strong> ${t.authorships.map(t=>t.author.display_name).join(", ")||"N/A"}</p>\n                                <p><strong>Affiliations:</strong> ${t.authorships.flatMap(t=>t.institutions.map(t=>t.display_name)).filter(t=>t).join(", ")||"N/A"}</p>\n                                <p><strong>FWCI:</strong> ${t.fwci||"N/A"}</p>\n                            `,e.appendChild(n)}),a.appendChild(e)}else a.innerHTML+="<p>No results found for your search.</p>"}catch(t){console.error("Error during search:",t),a&&(a.innerHTML=`<p>Error performing search: ${t.message}. Please try again.</p>`)}}))};const o=n(300)},966:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function c(t){try{i(r.next(t))}catch(t){a(t)}}function s(t){try{i(r.throw(t))}catch(t){a(t)}}function i(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}i((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.renderPcsasTab=function(){const t=document.getElementById("tab-content-pcsas");if(!t)return;t.innerHTML='\n        <h2>PCSAS Scraper</h2>\n        <button id="scrape-pcsas-button">Scrape PCSAS Data</button>\n        <div id="pcsas-results"></div>\n    ';const e=document.getElementById("scrape-pcsas-button"),n=document.getElementById("pcsas-results");e&&e.addEventListener("click",()=>r(this,void 0,void 0,function*(){n&&(n.innerHTML="<p>Scraping PCSAS data... This may take a moment.</p>");try{const t=(yield(0,o.scrapePcsasData)()).programs;if(n)if(n.innerHTML="<h3>PCSAS Programs:</h3>",t&&t.length>0){const e=document.createElement("ul");t.forEach(t=>{const n=document.createElement("li");n.innerHTML=`\n                                <h4><a href="${t.website}" target="_blank">${t.program_name||"No Name"}</a></h4>\n                                ${t.student_outcomes_link&&t.student_outcomes_link!==t.website?`<p><a href="${t.student_outcomes_link}" target="_blank">View Student Outcomes</a></p>`:""}\n                            `,e.appendChild(n)}),n.appendChild(e)}else n.innerHTML+="<p>No PCSAS programs found.</p>"}catch(t){console.error("Error scraping PCSAS data:",t),n&&(n.innerHTML=`<p>Error scraping PCSAS data: ${t.message}. Please try again.</p>`)}}))};const o=n(300)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}(()=>{const t=n(60);document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("root");e?(0,t.renderLandingPage)(e):console.error("Root element not found!")})})()})();